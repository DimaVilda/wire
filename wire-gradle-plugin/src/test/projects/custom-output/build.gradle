import com.squareup.wire.schema.SchemaHandler
import org.jetbrains.annotations.NotNull

plugins {
  id 'application'
  id 'com.squareup.wire'
}

class MyCustomHandlerFactory implements SchemaHandler.Factory {
  @Override public SchemaHandler create() {
    throw new RuntimeException("boom");
  }

  @Override
  SchemaHandler create(@NotNull List<String> list, @NotNull List<String> list1, boolean b,
      @NotNull String s) {
    throw new RuntimeException("custom handler is running!! " +
        list.join(", ") + ", " + list1.join(", ") + ", " + b);
  }
}

wire {
  sourcePath 'src/main/proto'

  custom {
    schemaHandlerFactory = new MyCustomHandlerFactory()
  }
}
